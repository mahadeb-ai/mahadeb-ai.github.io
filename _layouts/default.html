<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="{{ page.excerpt | default: site.description | strip_html | strip_newlines | truncate: 160 }}" />

  <!-- Icons / Fonts -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-0S8oJx7p0x6l9xXqkci4c9yF7v7sQ6qVx0M0o1+W9Hn4Q6G5Qb3m7KxQv0mNwq7p3A7xJgYf0Ck6bTz9jvCmAQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>

  <!-- CSS: tokens first -->
  <style>
    :root{
      /* brand */
      --brand-600:#4a6bff; /* primary */
      --brand-700:#3b55d6;
      --brand-200:#e7ecff;
      /* text */
      --txt-900:#0f172a;  /* slate-900 */
      --txt-700:#334155;
      --txt-500:#64748b;
      /* surface */
      --bg:#ffffff;
      --bg-soft:#f8fafc;
      --ring:rgba(74,107,255,.35);
      --shadow:0 10px 25px rgba(2,6,23,.08);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --brand-600:#7da0ff;
        --brand-700:#9ab3ff;
        --brand-200:#22306b;
        --txt-900:#e5e7eb;
        --txt-700:#cbd5e1;
        --txt-500:#94a3b8;
        --bg:#0b1020;
        --bg-soft:#0f172a;
        --ring:rgba(125,160,255,.45);
        --shadow:0 10px 25px rgba(0,0,0,.4);
      }
      .logo-mark{ filter: brightness(1.2) contrast(1.1); }
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;line-height:1.6;color:var(--txt-700);background:var(--bg)}

    /* Skip link */
    .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:var(--brand-600);color:#fff;padding:.5rem .75rem;border-radius:.5rem;z-index:1000}

    /* Frame */
    .page-frame{margin:12px auto;max-width:1200px;border-radius:16px;background:linear-gradient(180deg,var(--bg-soft),var(--brand-200) 220%);box-shadow:var(--shadow);overflow:hidden}
    .container{max-width:1100px;margin:0 auto;padding:0 1rem}

    /* Header/Nav */
    header{position:sticky;top:0;background:var(--bg);backdrop-filter:saturate(140%) blur(6px);border-bottom:1px solid rgba(100,116,139,.15);z-index:50}
    .nav-wrap{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:.6rem .5rem}
    .brand{display:flex;align-items:center;gap:.6rem;font-weight:700;color:var(--txt-900);text-decoration:none}
    .brand .logo-mark{width:28px;height:28px;border-radius:7px;background:linear-gradient(135deg,var(--brand-600),var(--brand-700));box-shadow:0 4px 14px var(--ring)}

    /* Live clock */
    .clock{font-variant-numeric:tabular-nums;color:var(--txt-500);font-size:.9rem;white-space:nowrap}

    /* Menu */
    .menu{display:flex;gap:.25rem;align-items:center}
    .menu a{display:inline-block;text-decoration:none;color:var(--brand-600);font-weight:600;letter-spacing:.2px;padding:.45rem .75rem;border-radius:.65rem;background:rgba(74,107,255,.08);transition:.2s ease}
    .menu a:hover,.menu a[aria-current="page"]{color:#fff;background:var(--brand-600);box-shadow:0 6px 18px var(--ring);transform:translateY(-1px)}

    /* Mobile menu */
    .hamburger{display:none;appearance:none;border:0;background:transparent;font-size:1.25rem;padding:.35rem;border-radius:.5rem}
    .hamburger:focus{outline:2px solid var(--brand-600)}
    #nav-toggle{display:none}

    /* Dropdown */
    .menu{display:flex;gap:.25rem;align-items:center}
    .menu .menu-item{position:relative}
    .drop-trigger{display:inline-flex;align-items:center;gap:.4rem;border:0;background:rgba(74,107,255,.08);color:var(--brand-600);font-weight:600;padding:.45rem .75rem;border-radius:.65rem;cursor:pointer;transition:.2s ease}
    .drop-trigger:hover{background:var(--brand-600);color:#fff;box-shadow:0 6px 18px var(--ring);transform:translateY(-1px)}
    .dropdown-menu{position:absolute;top:calc(100% + 8px);left:0;min-width:180px;background:var(--bg);border:1px solid rgba(100,116,139,.15);border-radius:12px;box-shadow:var(--shadow);padding:.4rem;display:none;z-index:30}
    .menu-item.open .dropdown-menu{display:block}
    .dropdown-menu a{display:block;padding:.45rem .6rem;border-radius:.5rem;color:var(--txt-700);text-decoration:none}
    .dropdown-menu a:hover{background:rgba(74,107,255,.08);color:var(--brand-600)}

    @media (max-width: 780px){
      .hamburger{display:inline-block}
      .menu{display:none}
      #nav-toggle:checked + .menu{display:flex;flex-direction:column;gap:.35rem;position:absolute;left:0;right:0;top:54px;padding:.5rem 1rem 1rem;background:var(--bg);border-bottom:1px solid rgba(100,116,139,.15)}
      .dropdown-menu{position:static;border:0;box-shadow:none;padding:0;margin:.25rem 0 0 0}
    }

    main{margin:2rem auto;max-width:900px;padding:0 1rem;color:var(--txt-700)}
    main h1, main h2, main h3{color:var(--brand-600)}

    .section-title{text-align:center;color:var(--brand-600);margin:0 0 1.25rem;font-size:1.75rem;position:relative}
    .section-title::after{content:"";display:block;width:96px;height:4px;background:linear-gradient(to right,var(--brand-600),var(--brand-700));margin:.45rem auto 0;border-radius:3px}

    /* Contact Cards */
    .contact-section{margin:2.5rem auto;max-width:900px;padding:0 1rem}
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .card{background:var(--bg);border-radius:14px;padding:1rem;box-shadow:0 5px 14px rgba(2,6,23,.06);transition:transform .2s ease, box-shadow .2s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 12px 24px rgba(2,6,23,.08)}
    .icon{font-size:1.2rem;margin-top:.15rem;color:var(--brand-600)}
    .card h3{margin:.25rem 0;color:var(--txt-900);font-size:1rem}
    .card p, .card a{margin:.2rem 0;color:var(--txt-700);font-size:.9rem}
    .card a{color:var(--txt-900);text-decoration:none}
    .card a:hover{text-decoration:underline}

    /* Footer */
    .cv-btn{margin-left:.25rem}
    .theme-toggle{margin-left:.35rem;appearance:none;border:1px solid rgba(100,116,139,.25);background:var(--bg);color:var(--txt-700);padding:.35rem .55rem;border-radius:.6rem;cursor:pointer;box-shadow:0 2px 6px rgba(2,6,23,.06)}
    .theme-toggle:hover{border-color:var(--brand-600)}

    /* Footer */
    footer{border-top:1px solid rgba(100,116,139,.15);padding:1.25rem 0;text-align:center}
    .social{display:flex;justify-content:center;gap:.6rem;margin:.25rem 0 1rem}
    .chip{display:inline-grid;place-items:center;width:40px;height:40px;border-radius:999px;background:linear-gradient(135deg,var(--brand-600),var(--brand-700));color:#fff;text-decoration:none;box-shadow:0 6px 18px var(--ring);transition:transform .18s ease}
    .chip:hover{transform:translateY(-2px)}
    .last-updated{font-size:.85rem;color:var(--txt-500)}

    /* Utilities */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
  {% seo %}
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>
  <div class="page-frame">
    <header>
      <div class="container nav-wrap" role="navigation" aria-label="Primary">
        <a class="brand" href="{{ '/' | relative_url }}" aria-label="{{ site.title }} home">
          <span class="logo-mark" aria-hidden="true"></span>
          <span>{{ site.title }}</span>
        </a>
        <label for="nav-toggle" class="sr-only">Toggle Navigation</label>
        <button class="hamburger" aria-controls="site-menu" aria-expanded="false" onclick="document.getElementById('nav-toggle').click()">
          <i class="fa-solid fa-bars"></i>
        </button>
        <input id="nav-toggle" type="checkbox" hidden>
        <nav id="site-menu" class="menu">
          {% for item in site.nav %}
            {% if item.children %}
              <div class="menu-item dropdown">
                <button class="drop-trigger" aria-haspopup="true" aria-expanded="false">
                  {% if item.icon %}<i class="fa-solid {{ item.icon }}" aria-hidden="true"></i>{% endif %}
                  <span>{{ item.title }}</span>
                  <i class="fa-solid fa-chevron-down" aria-hidden="true"></i>
                </button>
                <div class="dropdown-menu" role="menu">
                  {% for child in item.children %}
                    <a role="menuitem" href="{{ child.url | relative_url }}">{{ child.title }}</a>
                  {% endfor %}
                </div>
              </div>
            {% else %}
              <a href="{{ item.url | relative_url }}" {% if page.url == item.url %}aria-current="page"{% endif %}>{{ item.title }}</a>
            {% endif %}
          {% endfor %}
        </nav>
        <div class="clock" aria-live="polite" title="Your local time">ðŸ•’ <span id="live-clock"></span></div>
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode"><i class="fa-solid fa-moon"></i></button>
      </div>
    </header>

    <main id="main" class="container">
      {{ content }}
    </main>

    <footer>
      <div class="container">
      <div class="social" aria-label="Social links">
      <a class="chip chip--linkedin" href="https://www.linkedin.com/in/mahadeb-mandal-5486a726b/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
        <img src="https://cdn.simpleicons.org/linkedin/ffffff" alt="" aria-hidden="true">
      </a>
      <a class="chip chip--scholar" href="https://scholar.google.com/" target="_blank" rel="noopener noreferrer" aria-label="Google Scholar">
        <img src="https://cdn.simpleicons.org/googlescholar/ffffff" alt="" aria-hidden="true">
      </a>
      <a class="chip chip--rg" href="https://www.researchgate.net" target="_blank" rel="noopener noreferrer" aria-label="ResearchGate">
        <img src="https://cdn.simpleicons.org/researchgate/ffffff" alt="" aria-hidden="true">
      </a>
      {% if site.github_username %}
      <a class="chip chip--github" href="https://github.com/{{ site.github_username }}" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
        <img src="https://cdn.simpleicons.org/github/ffffff" alt="" aria-hidden="true">
      </a>
  {% endif %}
</div>

  {% endif %}
</div>

        <div class="last-updated">&copy; {{ 'now' | date: '%Y' }} {{ site.author | default: 'Mahadeb Mandal' }} Â· Last updated {{ page.last_modified_at | date: "%B %d, %Y" }}</div>
      </div>
    </footer>
  </div>

  <!-- JS: Live clock + prefer-reduced-motion friendly tick -->
  <script>
    (function(){
      const clock = document.getElementById('live-clock');
      function tick(){
        const now = new Date();
        clock.textContent = now.toLocaleTimeString();
      }
      tick();
      const id = setInterval(tick, 1000);
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches){
        clearInterval(id);
        clock.textContent = new Date().toLocaleTimeString();
      }
    })();
  </script>
  <!-- JS: Theme toggle + Live clock -->
  <script>
    (function(){
      const clock = document.getElementById('live-clock');
      function tick(){
        clock.textContent = new Date().toLocaleTimeString();
      }
      if(clock){ tick(); var id = setInterval(tick, 1000);
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches){ clearInterval(id); tick(); }
      }
      // Theme persistence
      const btn = document.getElementById('theme-toggle');
      const root = document.documentElement;
      const key = 'mm-theme';
      function applyTheme(mode){
        if(mode==='dark'){ root.dataset.theme='dark'; document.documentElement.classList.add('dark'); }
        else { root.dataset.theme='light'; document.documentElement.classList.remove('dark'); }
      }
      const saved = localStorage.getItem(key);
      if(saved){ applyTheme(saved); }
      btn && btn.addEventListener('click', function(){
        const next = (localStorage.getItem(key) === 'dark') ? 'light' : 'dark';
        localStorage.setItem(key, next); applyTheme(next);
        this.innerHTML = next==='dark' ? '<i class="fa-solid fa-sun"></i>' : '<i class="fa-solid fa-moon"></i>';
      });

      // Dropdown toggles
      document.querySelectorAll('.menu .menu-item .drop-trigger').forEach(function(b){
        b.addEventListener('click', function(e){
          e.preventDefault();
          const item = this.closest('.menu-item');
          const open = item.classList.contains('open');
          document.querySelectorAll('.menu .menu-item.open').forEach(function(i){ i.classList.remove('open'); });
          if(!open){ item.classList.add('open'); this.setAttribute('aria-expanded','true'); }
          else { this.setAttribute('aria-expanded','false'); }
        });
      });
      document.addEventListener('click', function(e){
        if(!e.target.closest('.menu')){
          document.querySelectorAll('.menu .menu-item.open').forEach(function(i){ i.classList.remove('open'); });
        }
      });
      document.addEventListener('keydown', function(e){ if(e.key==='Escape'){ document.querySelectorAll('.menu .menu-item.open').forEach(function(i){ i.classList.remove('open'); }); }});
    })();
  </script>
</body>
</html>
